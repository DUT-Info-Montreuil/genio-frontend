<div class="page-header-layout">
  <h2>Modifier un modèle existant</h2>
</div>

<table class="app-table models-table" *ngIf="modeles.length > 0">
  <thead>
  <tr>
    <th>Nom</th>
    <th>Année</th>
    <th>Actions</th>
  </tr>
  </thead>
  <tbody>
  <tr *ngFor="let m of modeles">
    <td>{{ m.nom }}</td>
    <td>{{ m.annee }}</td>
    <td>
      <button class="btn btn-secondary" (click)="selectModel(m)">Modifier</button>
    </td>
  </tr>
  </tbody>
</table>

<div *ngIf="modeles.length === 0">
  <p>Aucun modèle trouvé.</p>
</div>

<div *ngIf="selectedModel" class="auth-card">
  <h3>Modifier le modèle : {{ selectedModel.nom }}</h3>

  <form (ngSubmit)="onUpdate()" enctype="multipart/form-data">
    <div class="form-group-inline">
      <label>Année :</label>
      <input type="text" [value]="selectedModel.annee" disabled />
    </div>

    <div class="form-group">
      <label>Remplacer le fichier :</label>
      <input type="file" (change)="onFileSelected($event)" />
      <span *ngIf="selectedFile">{{ selectedFile.name }}</span>
    </div>

    <button type="submit" class="btn-login" [disabled]="isSubmitting || !selectedFile">
      <i class="fas fa-save"></i> Sauvegarder les modifications
    </button>
  </form>

  <div *ngIf="message" class="callout callout-success">{{ message }}</div>
  <div *ngIf="error" class="callout callout-error">{{ error }}</div>
</div>
