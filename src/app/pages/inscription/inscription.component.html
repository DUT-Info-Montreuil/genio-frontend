<div class="auth-page">
  <div class="auth-card" role="form" aria-labelledby="inscription-title">
    <h2 id="inscription-title">
      <i class="fas fa-user-plus" aria-hidden="true"></i>
      Inscription à GenioService
    </h2>

    <p *ngIf="error" class="error-message" role="alert" aria-live="assertive">{{ error }}</p>
    <p *ngIf="message" class="success-message" role="status" aria-live="polite">{{ message }}</p>

    <form (ngSubmit)="onRegister()" aria-label="Créer un compte GenioService">
      <div class="form-group-inline">
        <label for="prenom">Prénom</label>
        <input type="text" id="prenom" name="prenom" [(ngModel)]="prenom" required autocomplete="given-name" />
      </div>

      <div class="form-group-inline">
        <label for="nom">Nom</label>
        <input type="text" id="nom" name="nom" [(ngModel)]="nom" required autocomplete="family-name" />
      </div>

      <div class="form-group-inline">
        <label for="email">Adresse e-mail</label>
        <input type="email" id="email" name="email" [(ngModel)]="email" required autocomplete="email" />
      </div>

      <div class="form-group-inline">
        <label for="password">Mot de passe</label>
        <div class="input-wrapper">
          <input [type]="showPassword ? 'text' : 'password'" id="password" name="password"
                 [(ngModel)]="password" required autocomplete="new-password"
                 (input)="validatePassword()" />
          <button type="button" class="toggle-password" (click)="togglePasswordVisibility()"
                  [attr.aria-label]="showPassword ? 'Masquer le mot de passe' : 'Afficher le mot de passe'">
            <i [class]="showPassword ? 'fas fa-eye-slash' : 'fas fa-eye'" aria-hidden="true"></i>
          </button>
        </div>
        <ul class="password-rules">
          <li *ngFor="let rule of passwordRules">{{ rule }}</li>
        </ul>
      </div>

      <div class="form-group-inline">
        <label for="confirmPassword">Confirmation</label>
        <div class="input-wrapper">
          <input [type]="showConfirmPassword ? 'text' : 'password'" id="confirmPassword" name="confirmPassword"
                 [(ngModel)]="confirmPassword" required autocomplete="new-password" />
          <button type="button" class="toggle-password" (click)="toggleConfirmPasswordVisibility()"
                  [attr.aria-label]="showConfirmPassword ? 'Masquer le mot de passe' : 'Afficher le mot de passe'">
            <i [class]="showConfirmPassword ? 'fas fa-eye-slash' : 'fas fa-eye'" aria-hidden="true"></i>
          </button>
        </div>
      </div>

      <button type="submit" class="btn-login" [disabled]="isSubmitting">S’enregistrer</button>
    </form>
  </div>
</div>
